(()=>{var e={};e.id=178,e.ids=[178],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},39491:e=>{"use strict";e.exports=require("assert")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},1045:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>p}),s(71454),s(37764),s(35866);var r=s(23191),a=s(88716),i=s(37922),n=s.n(i),o=s(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let p=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,71454)),"D:\\supply-chain-latest\\supply-chain-scs\\client\\app\\profile\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,37764)),"D:\\supply-chain-latest\\supply-chain-scs\\client\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\supply-chain-latest\\supply-chain-scs\\client\\app\\profile\\page.js"],d="/profile/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}})},89804:(e,t,s)=>{Promise.resolve().then(s.bind(s,89714))},89714:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(10326),a=s(17577),i=s(44099),n=s(3461),o=s(94484),l=s.n(o);let p=()=>{let[e,t]=(0,a.useState)({FirstName:"",LastName:"",Address:"",City:"",State:"",Country:"",ZipCode:"",companyName:"",companyAddress:"",companyCityStateZip:"",companyPostCode:"",ProfilePicture:""}),[s,o]=(0,a.useState)(null),[p,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[x,y]=(0,a.useState)(!0),[g,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async function(){let e=localStorage.getItem("accessToken");if(e)try{let s=await i.Z.get(`${n.lx}/users/me`,{headers:{Authorization:`Bearer ${e}`}});200===s.status?(y(!1),c(s.data.user),t(s.data.user)):console.error("Failed to fetch user:",s.statusText)}catch(e){console.error("Failed to fetch user:",e)}})()},[]);let j=s=>{let{name:r,value:a}=s.target;t({...e,[r]:a})},$=async r=>{r.preventDefault(),u(""),h("");let a=localStorage.getItem("accessToken");if(!a){h("User is not authenticated.");return}f(!0);try{let r=new FormData;Object.keys(e).forEach(t=>{"ProfilePicture"!==t&&r.append(t,e[t]||"")}),s&&r.append("ProfilePicture",s);let l=await i.Z.put(`${n.c_}/${p.id}`,r,{headers:{Authorization:`Bearer ${a}`}});if(200===l.status){f(!1),u("Profile updated successfully!"),c(l.data.user),t(l.data.user),o(null);let e=document.getElementById("ProfilePicture");e&&(e.value="")}else f(!1),h("Failed to update profile.")}catch(e){f(!1),console.error("Update error:",e),h(e.response?.data?.message||"Something went wrong.")}};return x?r.jsx("p",{children:"Loading user data..."}):(0,r.jsxs)("div",{className:`${l().signup} w-100 mx-auto d-flex flex-column align-items-center justify-content-center my-3 signupForm`,children:[r.jsx("h2",{className:"mb-3",children:"Update Profile"}),(0,r.jsxs)("form",{onSubmit:$,className:`${l().form} text-center`,children:[(0,r.jsxs)("div",{children:[r.jsx("label",{children:"First Name"}),r.jsx("input",{type:"text",id:"FirstName",name:"FirstName",value:e.FirstName||"",onChange:j})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"LastName",children:"Last Name:"}),r.jsx("input",{type:"text",id:"LastName",name:"LastName",value:e.LastName||"",onChange:j,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"Address",children:"Address:"}),r.jsx("input",{type:"text",id:"Address",name:"Address",value:e.Address||"",onChange:j,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"City",children:"City:"}),r.jsx("input",{type:"text",id:"City",name:"City",value:e.City||"",onChange:j,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"State",children:"State:"}),r.jsx("input",{type:"text",id:"State",name:"State",value:e.State||"",onChange:j,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"Country",children:"Country:"}),r.jsx("input",{type:"text",id:"Country",name:"Country",value:e.Country||"",onChange:j,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"ZipCode",children:"Zip Code:"}),r.jsx("input",{type:"text",id:"ZipCode",name:"ZipCode",value:e.ZipCode||"",onChange:j,required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"companyName",children:"Company Name"}),r.jsx("input",{type:"text",id:"companyName",name:"companyName",value:e.companyName||"",onChange:j})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"companyAddress",children:"Company Address"}),r.jsx("input",{type:"text",id:"companyAddress",name:"companyAddress",value:e.companyAddress||"",onChange:j})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"companyCityStateZip",children:"Company City/State/Zip"}),r.jsx("input",{type:"text",id:"companyCityStateZip",name:"companyCityStateZip",value:e.companyCityStateZip||"",onChange:j})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"companyPostCode",children:"Company Post Code"}),r.jsx("input",{type:"text",id:"companyPostCode",name:"companyPostCode",value:e.companyPostCode||"",onChange:j})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"ProfilePicture",children:"Profile Picture:"}),(0,r.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[r.jsx("div",{className:"mb-0",children:r.jsx("img",{src:s?URL.createObjectURL(s):e.ProfilePicture?`https://i-scs.co.uk/uploads/${e.ProfilePicture}`:"/default-user-icon.png",alt:"Profile",className:"profilePic object-cover border"})}),r.jsx("input",{type:"file",id:"ProfilePicture",name:"ProfilePicture",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&o(t)}})]})]}),r.jsx("button",{type:"submit",disabled:g,children:g?"Updating....":"Update Profile"})]}),d&&r.jsx("p",{style:{color:"green"},children:d}),m&&r.jsx("p",{style:{color:"red"},children:m})]})};var c=s(60986),d=s(91536);function u(){return(0,r.jsxs)("div",{children:[r.jsx(d.Z,{}),r.jsx(p,{}),r.jsx(c.Z,{})]})}},3461:(e,t,s)=>{"use strict";s.d(t,{HL:()=>q,fs:()=>T,rc:()=>v,i7:()=>D,eJ:()=>f,G_:()=>c,av:()=>z,AE:()=>m,Eg:()=>X,R9:()=>g,$O:()=>O,ik:()=>Y,qZ:()=>x,$R:()=>B,XZ:()=>P,bd:()=>d,a6:()=>h,eP:()=>y,ez:()=>G,ot:()=>S,lx:()=>$,pt:()=>_,Ii:()=>Z,SE:()=>E,Fk:()=>A,UA:()=>F,c_:()=>N,uL:()=>b,Q9:()=>R,vh:()=>U,Y8:()=>k,$C:()=>L,w:()=>j,dP:()=>u,$Y:()=>M,l5:()=>I,Kk:()=>w,Z3:()=>C});let r="https://i-scs.co.uk";var a=s(44099);let i=`${r}/api/business`,n=a.Z.create({baseURL:i}),o=`${r}/api/inquiry`,l=a.Z.create({baseURL:o}),p=()=>{let e=localStorage.getItem("abisolToken");return e?{Authorization:`Bearer ${e}`}:{}},c=async e=>n.post("/create",e,{headers:p()}),d=async()=>n.get("/",{headers:p()}),u=async(e,t)=>n.put(`/${e}`,t,{headers:p()}),m=async e=>n.delete(`/${e}`,{headers:p()}),h=async()=>l.get("/",{headers:p()}),x=async(e,t)=>l.put(`/edit/${e}`,t,{headers:p()}),y=async e=>l.get(`/${e}`,{headers:p()}),g=async e=>l.delete(`/${e}`,{headers:p()}),f=`${r}/api/contact`,j=`${r}/api/signup`,$=`${r}/api/login`,v=`${r}/api/business-inquiries`,C=`${r}/api/verify-email`,P=`${r}/api/forgot-password`,b=`${r}/api/reset-password`,q=`${r}/api/products`,S=`${r}/api/inquiry/submit`,N=`${r}/api/userRoutes/profile`,F=`${r}/api/portOfLoading`,A=`${r}/api/portOfDischarge`,Z=`${r}/api/paymentTerms`,_=`${r}/api/paymentMethod`,w=`${r}/api/varianceTerms`,L=`${r}/api/shippingTerms`,k=`${r}/api/shippingMethod`,E=`${r}/api/pdfs`,U=`${r}/api`,D=`${r}/api/check-multiple-eori`,R=`${r}/api/save`,T=`${r}/api/inquiry/add-product-to-list`,M=`${r}/api/products`,O=e=>`${r}/api/remove/${e}`,z=e=>`${r}/api/products/${e}`,G=e=>`${r}/api/list/${e}`,I=`${r}/api/upload`,B=`${r}/api/files`,X=e=>`${r}/api/delete/${e}`,Y=e=>`${r}/api/download/${e}`},71454:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=s(68570);let a=(0,r.createProxy)(String.raw`D:\supply-chain-latest\supply-chain-scs\client\app\profile\page.js`),{__esModule:i,$$typeof:n}=a;a.default;let o=(0,r.createProxy)(String.raw`D:\supply-chain-latest\supply-chain-scs\client\app\profile\page.js#default`)},94484:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,777,99,496,226,425],()=>s(1045));module.exports=r})();