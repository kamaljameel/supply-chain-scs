(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4178],{56477:function(e,t,n){Promise.resolve().then(n.bind(n,81809))},81809:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p}});var a=n(57437),r=n(2265),c=n(38472),i=n(58399),o=n(12265),s=n.n(o),u=()=>{let[e,t]=(0,r.useState)({FirstName:"",LastName:"",Address:"",City:"",State:"",Country:"",ZipCode:"",companyName:"",companyAddress:"",companyCityStateZip:"",companyPostCode:"",ProfilePicture:""}),[n,o]=(0,r.useState)(null),[u,l]=(0,r.useState)(null),[d,p]=(0,r.useState)(""),[m,f]=(0,r.useState)(""),[h,y]=(0,r.useState)(!0),[x,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{!async function(){let e=localStorage.getItem("accessToken");if(e)try{let n=await c.Z.get("".concat(i.lx,"/users/me"),{headers:{Authorization:"Bearer ".concat(e)}});200===n.status?(y(!1),l(n.data.user),t(n.data.user)):console.error("Failed to fetch user:",n.statusText)}catch(e){console.error("Failed to fetch user:",e)}}()},[]);let C=n=>{let{name:a,value:r}=n.target;t({...e,[a]:r})},g=async a=>{a.preventDefault(),p(""),f("");let r=localStorage.getItem("accessToken");if(!r){f("User is not authenticated.");return}j(!0);try{let a=new FormData;Object.keys(e).forEach(t=>{"ProfilePicture"!==t&&a.append(t,e[t]||"")}),n&&a.append("ProfilePicture",n);let s=await c.Z.put("".concat(i.c_,"/").concat(u.id),a,{headers:{Authorization:"Bearer ".concat(r)}});if(200===s.status){j(!1),p("Profile updated successfully!"),l(s.data.user),t(s.data.user),o(null);let e=document.getElementById("ProfilePicture");e&&(e.value="")}else j(!1),f("Failed to update profile.")}catch(e){var s,d;j(!1),console.error("Update error:",e),f((null===(d=e.response)||void 0===d?void 0:null===(s=d.data)||void 0===s?void 0:s.message)||"Something went wrong.")}};return h?(0,a.jsx)("p",{children:"Loading user data..."}):(0,a.jsxs)("div",{className:"".concat(s().signup," w-100 mx-auto d-flex flex-column align-items-center justify-content-center my-3 signupForm"),children:[(0,a.jsx)("h2",{className:"mb-3",children:"Update Profile"}),(0,a.jsxs)("form",{onSubmit:g,className:"".concat(s().form," text-center"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"First Name"}),(0,a.jsx)("input",{type:"text",id:"FirstName",name:"FirstName",value:e.FirstName||"",onChange:C})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"LastName",children:"Last Name:"}),(0,a.jsx)("input",{type:"text",id:"LastName",name:"LastName",value:e.LastName||"",onChange:C,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"Address",children:"Address:"}),(0,a.jsx)("input",{type:"text",id:"Address",name:"Address",value:e.Address||"",onChange:C,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"City",children:"City:"}),(0,a.jsx)("input",{type:"text",id:"City",name:"City",value:e.City||"",onChange:C,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"State",children:"State:"}),(0,a.jsx)("input",{type:"text",id:"State",name:"State",value:e.State||"",onChange:C,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"Country",children:"Country:"}),(0,a.jsx)("input",{type:"text",id:"Country",name:"Country",value:e.Country||"",onChange:C,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"ZipCode",children:"Zip Code:"}),(0,a.jsx)("input",{type:"text",id:"ZipCode",name:"ZipCode",value:e.ZipCode||"",onChange:C,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"companyName",children:"Company Name"}),(0,a.jsx)("input",{type:"text",id:"companyName",name:"companyName",value:e.companyName||"",onChange:C})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"companyAddress",children:"Company Address"}),(0,a.jsx)("input",{type:"text",id:"companyAddress",name:"companyAddress",value:e.companyAddress||"",onChange:C})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"companyCityStateZip",children:"Company City/State/Zip"}),(0,a.jsx)("input",{type:"text",id:"companyCityStateZip",name:"companyCityStateZip",value:e.companyCityStateZip||"",onChange:C})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"companyPostCode",children:"Company Post Code"}),(0,a.jsx)("input",{type:"text",id:"companyPostCode",name:"companyPostCode",value:e.companyPostCode||"",onChange:C})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"ProfilePicture",children:"Profile Picture:"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)("div",{className:"mb-0",children:(0,a.jsx)("img",{src:n?URL.createObjectURL(n):e.ProfilePicture?"".concat("https://i-scs.co.uk","/uploads/").concat(e.ProfilePicture):"/default-user-icon.png",alt:"Profile",className:"profilePic object-cover border"})}),(0,a.jsx)("input",{type:"file",id:"ProfilePicture",name:"ProfilePicture",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&o(t)}})]})]}),(0,a.jsx)("button",{type:"submit",disabled:x,children:x?"Updating....":"Update Profile"})]}),d&&(0,a.jsx)("p",{style:{color:"green"},children:d}),m&&(0,a.jsx)("p",{style:{color:"red"},children:m})]})},l=n(61398),d=n(26031);function p(){return(0,a.jsxs)("div",{children:[(0,a.jsx)(d.Z,{}),(0,a.jsx)(u,{}),(0,a.jsx)(l.Z,{})]})}},58399:function(e,t,n){"use strict";n.d(t,{HL:function(){return b},fs:function(){return R},rc:function(){return C},i7:function(){return _},eJ:function(){return y},G_:function(){return s},av:function(){return z},AE:function(){return d},Eg:function(){return M},R9:function(){return h},$O:function(){return I},ik:function(){return Y},qZ:function(){return m},$R:function(){return D},XZ:function(){return v},bd:function(){return u},a6:function(){return p},eP:function(){return f},ez:function(){return B},ot:function(){return N},lx:function(){return j},pt:function(){return k},Ii:function(){return A},SE:function(){return U},Fk:function(){return Z},UA:function(){return F},c_:function(){return S},uL:function(){return P},Q9:function(){return O},vh:function(){return E},Y8:function(){return q},$C:function(){return w},w:function(){return x},dP:function(){return l},$Y:function(){return T},l5:function(){return $},Kk:function(){return L},Z3:function(){return g}});let a="https://i-scs.co.uk";var r=n(38472);let c=r.Z.create({baseURL:"".concat(a,"/api/business")}),i=r.Z.create({baseURL:"".concat(a,"/api/inquiry")}),o=()=>{let e=localStorage.getItem("abisolToken");return e?{Authorization:"Bearer ".concat(e)}:{}},s=async e=>c.post("/create",e,{headers:o()}),u=async()=>c.get("/",{headers:o()}),l=async(e,t)=>c.put("/".concat(e),t,{headers:o()}),d=async e=>c.delete("/".concat(e),{headers:o()}),p=async()=>i.get("/",{headers:o()}),m=async(e,t)=>i.put("/edit/".concat(e),t,{headers:o()}),f=async e=>i.get("/".concat(e),{headers:o()}),h=async e=>i.delete("/".concat(e),{headers:o()}),y="".concat(a,"/api/contact"),x="".concat(a,"/api/signup"),j="".concat(a,"/api/login"),C="".concat(a,"/api/business-inquiries"),g="".concat(a,"/api/verify-email"),v="".concat(a,"/api/forgot-password"),P="".concat(a,"/api/reset-password"),b="".concat(a,"/api/products"),N="".concat(a,"/api/inquiry/submit"),S="".concat(a,"/api/userRoutes/profile"),F="".concat(a,"/api/portOfLoading"),Z="".concat(a,"/api/portOfDischarge"),A="".concat(a,"/api/paymentTerms"),k="".concat(a,"/api/paymentMethod"),L="".concat(a,"/api/varianceTerms"),w="".concat(a,"/api/shippingTerms"),q="".concat(a,"/api/shippingMethod"),U="".concat(a,"/api/pdfs"),E="".concat(a,"/api"),_="".concat(a,"/api/check-multiple-eori"),O="".concat(a,"/api/save"),R="".concat(a,"/api/inquiry/add-product-to-list"),T="".concat(a,"/api/products"),I=e=>"".concat(a,"/api/remove/").concat(e),z=e=>"".concat(a,"/api/products/").concat(e),B=e=>"".concat(a,"/api/list/").concat(e),$="".concat(a,"/api/upload"),D="".concat(a,"/api/files"),M=e=>"".concat(a,"/api/delete/").concat(e),Y=e=>"".concat(a,"/api/download/").concat(e)},12265:function(){}},function(e){e.O(0,[2935,8472,2291,6648,4727,2971,7023,1744],function(){return e(e.s=56477)}),_N_E=e.O()}]);